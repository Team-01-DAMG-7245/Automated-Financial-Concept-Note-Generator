% Determine levels of losses to consider.

cutoff = 
;

% Obtain scenarios with losses below cutoff.
idxLoss = returnsTT.Market_Index <= -cutoff | ...
    returnsTT.Risk_Parity <= -cutoff;
% Indices when risk parity outperforms the market
idxLossMarketWorse = ...
    returnsTT.Market_Index(idxLoss) <= returnsTT.Risk_Parity(idxLoss);
catLoss = categorical(idxLossMarketWorse, ...
    [0 1], {'RiskParityWorse','MarketIndexWorse'});
% Plot pie chart.
pie(catLoss)

The plot shows that in 78% of the scenarios with meaningful losses, the market index loses more than
the risk parity strategy. In this example, the reason the risk parity strategy outperforms the market
index is because the risk parity strategy is more resilient to larger losses.

Local Functions

function new_weights = riskParityFcn(~,pricesTT)
% Risk parity rebalance function

% Invest only in assets. First column of pricesTT is the market index.
assetReturns = tick2ret(pricesTT(:,2:end));
assetCov = cov(assetReturns{:,:});

% Do not invest in the market index.
new_weights = [0; riskBudgetingPortfolio(assetCov)];

end

4
Mean-Variance Portfolio Optimization Tools

4-294
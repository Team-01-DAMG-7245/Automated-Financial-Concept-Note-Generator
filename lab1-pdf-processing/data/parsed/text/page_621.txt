Create Backtest Strategies

In this example the rebalancing frequency of the strategies is set to the first available day of each
month.

% Rebalance at the beginning of the month.
tEnd = datetime(2006,12,31);
rebalFreq = t0:calmonths(1):tEnd;

The lookback window defines the minimum and maximum amount of data to consider when
rebalancing. In this example, the rebalance occurs if the backtest start time is at least 2 months prior
to the rebalancing time, and it will not include prices older than 6 calendar months.

% Set the rolling lookback window to be at least 2 calendar months and at
% most 6 calendar months.
minLookback = calmonths(2);
maxLookback = calmonths(6);
lookback  = [minLookback maxLookback];

% Use a fixed transaction cost (buy and sell costs are both 0.5% of amount
% traded).
transactionsFixed = 0.005;

% Define backtest strategies
strat1 = backtestStrategy('Equal Weighted', @equalWeightFcn, ...
    'RebalanceFrequency', rebalFreq, ...
    'LookbackWindow', lookback, ...
    'TransactionCosts', transactionsFixed, ...
    'InitialWeights', equalWeight_initial);

strat2 = backtestStrategy('Max Sharpe Ratio', @maxSharpeRatioFcn, ...
    'RebalanceFrequency', rebalFreq, ...
    'LookbackWindow', lookback, ...

Backtest Investment Strategies Using datetime and calendarDuration

4-453